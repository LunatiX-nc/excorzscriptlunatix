# WebSocket Multiport Configuration
frontend websocket_frontend
    mode tcp
    bind *:80-1000 tfo  # Adjust port range as needed
    tcp-request content accept if { req.ssl_hello_type 1 }
    acl is_websocket hdr(Upgrade) -i WebSocket
    acl is_http req.ssl_hello_type 1
    use_backend websocket_backend if is_websocket
    use_backend http_backend if is_http

# WebSocket Backend (for WebSocket Connections)
backend websocket_backend
    mode tcp
    balance roundrobin
    server ws1 127.0.0.1:9001 check
    server ws2 127.0.0.1:9002 check

# HTTP Backend (for regular HTTP requests)
backend http_backend
    mode http
    balance roundrobin
    server http1 127.0.0.1:8080 check
    server http2 127.0.0.1:8081 check
